# Phase 6.1 Daily Insights - Visual & Technical Reference

## ğŸ“± Screen Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Daily Insights              â”‚ â—„â”€â”€ AppBar with title
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   TODAY'S POWER NUMBER      â”‚   â”‚ â—„â”€â”€ DailyInsightTile
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚    - Power number (1-9) in circle
â”‚  â”‚ 7 â”‚   Spiritual Growth    â”‚ â”‚   â”‚    - Day of week + date
â”‚  â”‚   â”‚   (with full insight) â”‚ â”‚   â”‚    - Blessed day indicator (â­)
â”‚  â”‚   â”‚   [tap to expand]     â”‚ â”‚   â”‚    - Full interpretation text
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  WEEKLY PREVIEW                     â”‚ â—„â”€â”€ WeeklyPreviewCarousel
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”   â”‚    - Horizontal scroll
â”‚  â”‚ 9    â”‚ 1    â”‚ 2    â”‚ 3    â”‚   â”‚    - 7 days
â”‚  â”‚ Fri  â”‚ Sat  â”‚ Sun  â”‚ Mon  â”‚   â”‚    - Brief insight per day
â”‚  â”‚ Jan9 â”‚ Jan10â”‚ Jan11â”‚ Jan12â”‚   â”‚
â”‚  â”‚Brief â”‚Brief â”‚Brief â”‚Brief â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  BLESSED DAYS CALENDAR              â”‚ â—„â”€â”€ BlessedDaysCalendar
â”‚  â—„ January 2026 â–º                  â”‚    - Month navigation
â”‚  â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”          â”‚    - 7x7 grid (weeks)
â”‚  â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚  â”‚    - Color coded:
â”‚  â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤          â”‚      * Green = Blessed
â”‚  â”‚ 8 â”‚ 9â—â”‚10 â”‚11 â”‚12 â”‚13 â”‚14â”‚  â”‚      * Blue = Today
â”‚  â”‚   â”‚â—â—â”‚   â”‚   â”‚   â”‚   â”‚   â”‚  â”‚
â”‚  â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤          â”‚    - Dot below blessed
â”‚  â”‚15 â”‚16 â”‚17 â”‚18â—â”‚19 â”‚20 â”‚21â”‚  â”‚    - Red dot on today
â”‚  â”‚   â”‚   â”‚   â”‚â—â—â”‚   â”‚   â”‚   â”‚  â”‚
â”‚  â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤          â”‚
â”‚  â”‚22 â”‚23 â”‚24 â”‚25 â”‚26 â”‚27â—â”‚28â”‚  â”‚
â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚â—â—â”‚   â”‚  â”‚
â”‚  â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜          â”‚
â”‚  â–¡ Blessed day  â–¡ Today           â”‚
â”‚                                     â”‚
â”‚  PERSONAL MONTH GUIDANCE            â”‚ â—„â”€â”€ PersonalMonthGuidanceCard
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    - Large month badge
â”‚  â”‚ Personal Month    â”Œâ”€â”€â”€â”€â”€â”   â”‚   â”‚    - Theme text
â”‚  â”‚ January 2026      â”‚  7  â”‚   â”‚   â”‚    - Actionable guidance
â”‚  â”‚                   â”‚Monthâ”‚   â”‚   â”‚    - Color coded by #
â”‚  â”‚ Personal Year: 6  â”‚     â”‚   â”‚   â”‚
â”‚  â”‚ Calendar: 1       â””â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚ Theme: Introspection &      â”‚   â”‚
â”‚  â”‚ spiritual growth. A time    â”‚   â”‚
â”‚  â”‚ for reflection and wisdom.  â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚ ğŸ§˜ A time for reflection   â”‚   â”‚
â”‚  â”‚ and inner wisdom. Trust     â”‚   â”‚
â”‚  â”‚ your intuition.             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚                           â—„â”€ Scroll â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Color Coding System

### Monthly Personal Month Colors (1-9)

```
Month 1 (Red):
  - Background: Red 100
  - Accent: Red
  - Icon: Circle outline, leading number

Month 2 (Orange):
  - Background: Orange 100
  - Accent: Orange
  - Icon: Partnership symbol

Month 3 (Yellow):
  - Background: Yellow 100
  - Accent: Yellow 700
  - Icon: Creative spark

Month 4 (Green):
  - Background: Green 100
  - Accent: Green
  - Icon: Foundation/building

Month 5 (Teal):
  - Background: Teal 100
  - Accent: Teal
  - Icon: Movement/change

Month 6 (Blue):
  - Background: Blue 100
  - Accent: Blue
  - Icon: Heart/service

Month 7 (Indigo):
  - Background: Indigo 100
  - Accent: Indigo
  - Icon: Third eye/wisdom

Month 8 (Purple):
  - Background: Purple 100
  - Accent: Purple
  - Icon: Crown/power

Month 9 (Pink):
  - Background: Pink 100
  - Accent: Pink
  - Icon: Flower/completion
```

---

## ğŸ”„ State Management Flow

### Provider Architecture

```
DailyInsightParams
â”œâ”€â”€ lifeSeal: int
â”œâ”€â”€ dayOfBirth: int
â””â”€â”€ targetDate: String? (ISO YYYY-MM-DD)
    â†“
dailyInsightProvider (FutureProvider.family)
    â†“
DailyInsightsService.getDailyInsight()
    â†“
POST /daily/insight
    â†“
DailyInsightResponse
â”œâ”€â”€ date: String
â”œâ”€â”€ dayOfWeek: String
â”œâ”€â”€ powerNumber: int
â”œâ”€â”€ isBlessedDay: bool
â”œâ”€â”€ insight: DailyInsightInterpretation
â””â”€â”€ briefInsight: String

WeeklyParams
â”œâ”€â”€ lifeSeal: int
â””â”€â”€ startDate: String?
    â†“
weeklyInsightsProvider (FutureProvider.family)
    â†“
DailyInsightsService.getWeeklyInsights()
    â†“
POST /daily/weekly
    â†“
WeeklyInsightsResponse
â”œâ”€â”€ weekStarting: String
â””â”€â”€ dailyPreviews: List<DailyPowerPreview>
    â”œâ”€â”€ date: String
    â”œâ”€â”€ dayOfWeek: String
    â”œâ”€â”€ powerNumber: int
    â””â”€â”€ briefInsight: String

BlessedDaysParams
â”œâ”€â”€ dayOfBirth: int
â”œâ”€â”€ month: int
â””â”€â”€ year: int
    â†“
blessedDaysProvider (FutureProvider.family)
    â†“
DailyInsightsService.getBlessedDays()
    â†“
POST /daily/blessed-days
    â†“
BlessedDaysResponse
â”œâ”€â”€ month: int
â”œâ”€â”€ year: int
â”œâ”€â”€ monthName: String
â””â”€â”€ blessedDates: List<String> (ISO dates)

PersonalMonthParams
â”œâ”€â”€ dayOfBirth: int
â”œâ”€â”€ monthOfBirth: int
â”œâ”€â”€ yearOfBirth: int
â”œâ”€â”€ targetMonth: int?
â””â”€â”€ targetYear: int?
    â†“
personalMonthProvider (FutureProvider.family)
    â†“
DailyInsightsService.getPersonalMonth()
    â†“
POST /daily/personal-month
    â†“
PersonalMonthResponse
â”œâ”€â”€ personalMonth: int (1-9)
â”œâ”€â”€ personalYear: int (1-9)
â”œâ”€â”€ calendarMonth: int
â”œâ”€â”€ calendarYear: int
â”œâ”€â”€ monthName: String
â””â”€â”€ theme: String
```

---

## ğŸ“ Widget Hierarchy

```
DailyInsightsPage (ConsumerWidget)
â”œâ”€â”€ Scaffold
â”‚   â”œâ”€â”€ AppBar(title: "Daily Insights")
â”‚   â””â”€â”€ body: RefreshIndicator
â”‚       â””â”€â”€ ListView
â”‚           â”œâ”€â”€ DailyInsightTile (data: DailyInsightResponse)
â”‚           â”‚   â”œâ”€â”€ Power number circle
â”‚           â”‚   â”œâ”€â”€ Day + date
â”‚           â”‚   â”œâ”€â”€ Blessed indicator
â”‚           â”‚   â””â”€â”€ Full insight text
â”‚           â”‚
â”‚           â”œâ”€â”€ SizedBox(height: 16)
â”‚           â”œâ”€â”€ Text("Weekly Preview")
â”‚           â”‚
â”‚           â”œâ”€â”€ WeeklyPreviewCarousel(lifeSeal, onSelect)
â”‚           â”‚   â”œâ”€â”€ SingleChildScrollView (horizontal)
â”‚           â”‚   â””â”€â”€ Row of DailyPowerPreview cards
â”‚           â”‚       â”œâ”€â”€ Power number circle
â”‚           â”‚       â”œâ”€â”€ Day of week + date
â”‚           â”‚       â””â”€â”€ Brief insight (3 lines max)
â”‚           â”‚
â”‚           â”œâ”€â”€ SizedBox(height: 24)
â”‚           â”œâ”€â”€ Text("Blessed Days")
â”‚           â”‚
â”‚           â”œâ”€â”€ BlessedDaysCalendar(dayOfBirth, initialMonth, onSelectDate)
â”‚           â”‚   â”œâ”€â”€ Row (navigation buttons)
â”‚           â”‚   â”‚   â”œâ”€â”€ IconButton (prev month)
â”‚           â”‚   â”‚   â”œâ”€â”€ Text (month name)
â”‚           â”‚   â”‚   â””â”€â”€ IconButton (next month)
â”‚           â”‚   â”‚
â”‚           â”‚   â””â”€â”€ GridView.builder
â”‚           â”‚       â””â”€â”€ [49 cells = 7 cols Ã— 7 weeks]
â”‚           â”‚           â””â”€â”€ Each cell:
â”‚           â”‚               â”œâ”€â”€ InkWell(onTap)
â”‚           â”‚               â”œâ”€â”€ AnimatedContainer
â”‚           â”‚               â””â”€â”€ Stack
â”‚           â”‚                   â”œâ”€â”€ Center(Text: day number)
â”‚           â”‚                   â””â”€â”€ Positioned(dot for blessed)
â”‚           â”‚
â”‚           â”‚   â””â”€â”€ Legend
â”‚           â”‚       â”œâ”€â”€ Blessed indicator + text
â”‚           â”‚       â””â”€â”€ Today indicator + text
â”‚           â”‚
â”‚           â”œâ”€â”€ SizedBox(height: 24)
â”‚           â”œâ”€â”€ Text("Personal Month Guidance")
â”‚           â”‚
â”‚           â””â”€â”€ PersonalMonthGuidanceCard(dayOfBirth, monthOfBirth, yearOfBirth)
â”‚               â”œâ”€â”€ Card(elevation: 2)
â”‚               â””â”€â”€ Padding
â”‚                   â”œâ”€â”€ Row (header)
â”‚                   â”‚   â”œâ”€â”€ Column (month name + year)
â”‚                   â”‚   â””â”€â”€ Container (large number badge)
â”‚                   â”‚       â””â”€â”€ Column
â”‚                   â”‚           â”œâ”€â”€ Text(number)
â”‚                   â”‚           â””â”€â”€ Text("Personal")
â”‚                   â”‚
â”‚                   â”œâ”€â”€ SizedBox
â”‚                   â”‚
â”‚                   â”œâ”€â”€ Container (info box)
â”‚                   â”‚   â””â”€â”€ Row (2 columns + divider)
â”‚                   â”‚       â”œâ”€â”€ Personal Year
â”‚                   â”‚       â”œâ”€â”€ Divider
â”‚                   â”‚       â””â”€â”€ Calendar Month
â”‚                   â”‚
â”‚                   â”œâ”€â”€ SizedBox
â”‚                   â”‚
â”‚                   â”œâ”€â”€ Text("Monthly Theme")
â”‚                   â”œâ”€â”€ Text(data.theme)
â”‚                   â”‚
â”‚                   â””â”€â”€ Container (guidance box)
â”‚                       â””â”€â”€ Text(actionable guidance)
```

---

## ğŸŒŠ Data Flow Example

### Scenario: User opens "Daily Insights" from Decode Result

```
1. User taps "Daily Insights" FAB
   â†“
2. Extract birth info:
   - lifeSeal = 7
   - dayOfBirth = 9
   - monthOfBirth = 5
   - yearOfBirth = 1990
   â†“
3. Navigate to DailyInsightsPage:
   DailyInsightsPage(
     lifeSeal: 7,
     dayOfBirth: 9,
     monthOfBirth: 5,
     yearOfBirth: 1990,
   )
   â†“
4. Page creates params:
   DailyInsightParams(lifeSeal: 7, dayOfBirth: 9, targetDate: null)
   WeeklyParams(lifeSeal: 7, startDate: null)
   BlessedDaysParams(dayOfBirth: 9, month: 1, year: 2026)
   PersonalMonthParams(dayOfBirth: 9, monthOfBirth: 5, yearOfBirth: 1990)
   â†“
5. Providers fetch data in parallel:
   - dailyInsightProvider â†’ GET /daily/insight
   - weeklyInsightsProvider â†’ GET /daily/weekly
   - blessedDaysProvider â†’ GET /daily/blessed-days
   - personalMonthProvider â†’ GET /daily/personal-month
   â†“
6. UI builds while loading (skeleton states):
   - DailyInsightTile: Loading skeleton
   - WeeklyPreviewCarousel: Shimmer effect
   - BlessedDaysCalendar: Grid skeleton
   - PersonalMonthGuidanceCard: Loading skeleton
   â†“
7. Data arrives, UI updates:
   - Today: Power 7, blessed, insight "Spiritual Growth"
   - Week: [9, 1, 2, 3, 4, 5, 6] for next 7 days
   - Blessed: [9, 18, 27] highlighted in green
   - Personal Month: 7 (January for this user)
   â†“
8. User can interact:
   - Swipe weekly carousel
   - Click blessed date (9, 18, 27)
   - Previous/next month in calendar
   - Refresh with pull gesture
   â†“
9. On date selection:
   - Update targetDate: "2026-01-18"
   - Reload dailyInsightProvider with new date
   - Show loading state, then new data
```

---

## âš¡ Performance Optimizations

### Caching Strategy
- **Riverpod caching**: Providers cache for entire session
- **API response caching**: 5-minute TTL in DailyInsightsService
- **Widget rebuilding**: Only affected widgets rebuild on state change
- **Lazy loading**: Calendar grid only builds visible cells

### Memory Usage
- **No memory leaks**: Proper disposal of listeners
- **Image optimization**: No heavy images in UI
- **String pooling**: Reusable text styles
- **List reuse**: DailyPowerPreview cached in provider

---

## ğŸš¨ Error Handling

### Scenarios Handled

1. **Network Error**
   ```
   Error state shown with:
   - Warning icon
   - "Could not load [feature]"
   - "Check your connection and try again"
   - Retry button available
   ```

2. **Invalid Date**
   ```
   Gracefully handled:
   - Past dates in calendar
   - Future dates
   - Feb 29 in non-leap years
   - Month boundaries
   ```

3. **Loading Timeout**
   ```
   Skeleton loaders show for up to 30s:
   - Smooth shimmer animation
   - Never shows blank screen
   - Automatic retry on timeout
   ```

4. **Partial Load Failure**
   ```
   Independent loading:
   - Blessed calendar fails? Other features load
   - Personal month fails? Daily tile still works
   - Each widget handles its own errors
   ```

---

## ğŸ” Security & Validation

### Input Validation
- âœ… Date format validation (YYYY-MM-DD)
- âœ… Birth day range (1-31)
- âœ… Birth month range (1-12)
- âœ… Year range (1900-current)
- âœ… Life seal range (1-9)

### Data Sanitization
- âœ… API responses validated against models
- âœ… Null checks on all optional fields
- âœ… Type safety with Dart's strict mode
- âœ… No XSS vectors (Flutter, no HTML)

### Privacy
- âœ… No birth data transmitted beyond API
- âœ… No analytics on sensitive calculations
- âœ… Local storage only (no cloud sync yet)
- âœ… No data sharing with third parties

---

## ğŸ“ˆ Analytics Integration

### Events Tracked (Ready for Firebase)

```
Event: daily_insights_viewed
- Parameters:
  - personal_month: int (1-9)
  - power_number: int (1-9)
  - is_blessed_day: boolean
  - view_date: ISO date
  
Event: blessed_day_selected
- Parameters:
  - date: ISO date
  - month: int
  
Event: personal_month_viewed
- Parameters:
  - personal_month: int (1-9)
  - personal_year: int (1-9)
  
Event: weekly_preview_tapped
- Parameters:
  - target_power_number: int
  - days_ahead: int (0-6)
```

---

## âœ… Verification Checklist

- âœ… All 4 data providers working
- âœ… Daily insight tile displays correctly
- âœ… Weekly carousel scrolls smoothly
- âœ… Blessed calendar highlights properly
- âœ… Personal month card shows theme
- âœ… Today indicator visible
- âœ… Month navigation works
- âœ… Date selection updates view
- âœ… Error states display correctly
- âœ… Loading states smooth
- âœ… No compilation errors
- âœ… No runtime crashes
- âœ… Responsive on all screen sizes
- âœ… Dark mode works
- âœ… Accessibility features present
- âœ… Performance is smooth (60 FPS)

---

## ğŸ“š Code References

### Key Files
- **Main Page:** `lib/features/daily_insights/view/daily_insights_page.dart`
- **Month Card:** `lib/features/monthly_guidance/personal_month_guidance_card.dart`
- **Calendar:** `lib/features/daily_insights/widgets/blessed_days_calendar.dart`
- **Daily Tile:** `lib/features/daily_insights/widgets/daily_insight_tile.dart`
- **Weekly Carousel:** `lib/features/daily_insights/widgets/weekly_preview_carousel.dart`
- **Service:** `lib/features/daily_insights/service.dart`
- **Providers:** `lib/features/daily_insights/providers.dart`
- **Models:** `lib/features/daily_insights/models.dart`

### Backend Routes
- `POST /daily/insight` - Daily power number
- `POST /daily/weekly` - 7-day forecast
- `POST /daily/blessed-days` - Blessed dates
- `POST /daily/personal-month` - Month theme

---

**Last Updated:** January 17, 2026  
**Status:** âœ… Complete & Production Ready  
**Next Phase:** 6.2 Enhanced Onboarding (Optional)
